let tipoUsuario;var html;$.get(direccionAPI+"/micuenta/"+Cookies.get("session_token"),(function(t,e){direccionAPI;var o=t.items[0];o.titulo;tipoUsuario=o.tipo_usuario;var a=getUrlParameter("id");$("#idpsText").val(a),loadInfo(a)}));var getUrlParameter=function(t){var e,o,a=window.location.search.substring(1).split("&");for(o=0;o<a.length;o++)if((e=a[o].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1])};function loadInfo(t){"00A"==tipoUsuario&&"01A"==tipoUsuario&&$("#observacionTA").removeClass("d-none"),$("#listaEstudiantes").html(""),$.ajax({url:direccionAPI+"/trabajodegrado/obtener/"+t+"/"+Cookies.get("session_token"),type:"get",success:function(e){if(e.info.cantidad||0==t.length){var o=e.items[0],a=o.aprobacion_biblioteca,i=o.aprobacion_enlace,s=o.aprobacion_profesor;"00A"!=tipoUsuario&&"01A"!=tipoUsuario||a||$("#aprobarBTNS").removeClass("d-none"),"20E"!=tipoUsuario||i||$("#aprobarBTNS").removeClass("d-none"),"10P"!=tipoUsuario||s||$("#aprobarBTNS").removeClass("d-none"),a&&i&&s&&("00A"==tipoUsuario||"01A"==tipoUsuario)?$("#pazysalvoBTN").removeClass("d-none"):a&&i||"00A"!=tipoUsuario&&"01A"!=tipoUsuario&&"30E"!=tipoUsuario||($("#observacionTA").removeClass("d-none"),"30E"==tipoUsuario&&$("#repositorioCheck").removeClass("d-none")),$("#tituloSp").text(o.titulo_trabajo),$("#asesorSp").text(o.asesor),$("#porcentajeSp").text(o.porcentaje+" %"),$("#sedeSp").text(o.sede),$("#facultadSp").text(o.facultad),$("#carreraSp").text(o.carrera),$("#modalidadSp").text(o.modalidad),$.each(o.estudiantes,(function(){html+="<td>"+this.estudiante+"</td>",$.ajax({url:direccionAPI+"/estudiante/obtener/"+this.estudiante+"/"+Cookies.get("session_token"),success:function(t){html="<td>"+t.items[0].nombre_completo+"</td>",html+="<td>"+t.items[0].cedula+"</td>",t.items[0].morosidades&&"00A"==tipoUsuario||"01A"==tipoUsuario?html+="<td class='bg-danger text-white'>Moroso</td>":html+="<td class='bg-success text-white'>Paz y Salvo</td>",html+="<td><a target='_blank' class='btn btn-primary m-0 p-0' href='/app/estudiante/?id="+t.items[0].cedula+"'>VER MÁS</a>"}}).done((function(){$.ajax({url:direccionAPI+"/estudiante/obtener/"+this.estudiante+"/"+Cookies.get("session_token"),success:function(t){html="<td>"+t.items[0].nombre_completo+"</td>",html+="<td>"+t.items[0].cedula+"</td>",t.items[0].morosidades?html+="<td>Moroso</td>":html+="<td>Paz y Salvo</td>",html+="<td><a target='_blank' class='btn btn-primary m-0 p-0' href='/app/estudiante/?id="+t.items[0].cedula+"'>VER MÁS</a>"}}),$("#listaEstudiantes").append("<tr>"+html+"</tr>")}))})),o.url_documento.length&&($("#linkDocumento").show(),$("#linkDocumento").attr("href","/app/documento/trabajodegrado/?id="+t))}else $("#tituloSp").text(""),$("#asesorSp").text(""),$("#porcentajeSp").text(""),$("#sedeSp").text(""),$("#facultadSp").text(""),$("#carreraSp").text(""),alert("El número de identificación no existe")},error:function(t,e,o){}})}function delay(t,e){var o=0;return function(){var a=this,i=arguments;clearTimeout(o),o=setTimeout((function(){t.apply(a,i)}),e||0)}}$("#idpsText").on("input",delay((function(t){var e=$("#idpsText").val();$("#aprobarBTN").hide(),$("#linkDocumento").hide(),$("#linkDocumento").attr("href",""),loadInfo(e)}),500));